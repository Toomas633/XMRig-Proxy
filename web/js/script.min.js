const t="api";let e,a,s=[],r=[];function h(t,e){fetch(t,{method:"GET"}).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then(e)["catch"]((t=>{console.error("Error fetching data:",t)}))}function l(t){if(t<=0)return"N/A";const e=(Math.round((new Date).getTime())-t)/1e3,a=["years","months","weeks","days","hours","minutes","seconds"],s=[31536e3,2592e3,604800,86400,3600,60,1];for(let r=0;r<a.length;r++){const t=Math.floor(e/s[r]);if(t>0)return`${t} ${a[r]} ago`}return"N/A"}function i(t){if(!(t&&"object"==typeof t&&Object.keys(t).length>0))return;const e=t.results,a=t.hashrate.total;$("#hashrate").text(a[0]+" Kh/s"),$("#hashrate10m").text(a[1]+" Kh/s"),$("#hashrate1h").text(a[2]+" Kh/s"),$("#hashrate12h").text(a[3]+" Kh/s"),$("#hashrate24h").text(a[4]+" Kh/s"),$("#hashrate-all").text(a[5]+" Kh/s");const s=e.accepted,r=e.accepted+e.rejected+e.invalid;$("#acceptedshares").text(`${s} / ${r} (${(s/r*100).toFixed(2)}%)`),$("#hashes").text(e.hashes_total.toLocaleString()),$("#time").text((t.uptime/3600).toFixed(2)+" hours"),$("#mode").text(`${t.mode}`),$("#latency").text(`Ping: ${e.latency} ms`),$("#avg_time").text(`Avg: ${e.avg_time} s`),$("#best").text(`Best: ${e.best[0].toLocaleString()}`),$("#effort").text(`${(e.hashes_total/e.best[0]*100).toFixed(2)}%`),$("#version").text(`${t.version}`)}function o(t){if(!(t&&"object"==typeof t&&Object.keys(t).length>0))return;s=[],r=[];let h=0,i=0;t.workers.forEach((t=>{const e=[t[0].length>30?`<span data-toggle="tooltip" data-placement="top" title="${t[0]}">${t[0].substr(0,30)}...</span>`:t[0],`${t[1]}`,`${t[3]}/${t[4]}/${t[5]}`,`${t[8]} Kh/s`,`${t[9]} Kh/s`,`${t[10]} Kh/s`,`${t[11]} Kh/s`,`${t[12]} Kh/s`,l(t[7])];parseInt(t[2])>0?(parseInt(t[2])>1&&(e[0]+=` x${t[2]}`),s.push(e),h++):(r.push(e),i++)})),$("#allworkers").text(h+i),$("#activeworkers").text(h),$("#notactiveworkers").text(i),null!==e&&"object"==typeof e&&e.clear().rows.add(s).draw(),null!==a&&"object"==typeof a&&a.clear().rows.add(r).draw()}function c(){h(`${t}?action=summary`,i)}function n(){h(`${t}?action=workers`,o)}$(document).ready((()=>{c(),n(),e=$("#workerstable").DataTable({data:s,columns:[{title:"Name",className:"table-center"},{title:"IP",width:"10%",className:"table-right"},{title:"Shares",width:"10%",className:"table-right"},{title:"Hashrate 1m",width:"10%",className:"table-right"},{title:"Hashrate 10m",width:"10%",className:"table-right"},{title:"Hashrate 1h",width:"10%",className:"table-right"},{title:"Hashrate 12h",width:"10%",className:"table-right"},{title:"Hashrate 24h",width:"10%",className:"table-right"},{title:"Last Hash",width:"10%",className:"table-right"}],order:[[0,"desc"]],scrollY:"7.7rem"}),a=$("#naworkerstable").DataTable({data:r,columns:[{title:"Name",className:"table-center"},{title:"IP",width:"10%",className:"table-right"},{title:"Shares",width:"10%",className:"table-right"},{title:"Hashrate 1m",width:"10%",className:"table-right"},{title:"Hashrate 10m",width:"10%",className:"table-right"},{title:"Hashrate 1h",width:"10%",className:"table-right"},{title:"Hashrate 12h",width:"10%",className:"table-right"},{title:"Hashrate 24h",width:"10%",className:"table-right"},{title:"Last Hash",width:"10%",className:"table-right"}],order:[[0,"desc"]],scrollY:"7.7rem"})}));